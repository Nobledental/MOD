<!DOCTYPE html>
<html lang="en" data-theme="matte">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HealthFlo â€” Patient OS: Easy View</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Model Viewer -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="css/patient-dashboard.css">
</head>

<body class="hf-body fade-in-page">

  <!-- HEADER -->
  <header class="hf-header">
    <div class="header-inner">
      <div class="hf-logo">
        <span class="logo-dot"></span>
        HealthFlo OS
      </div>

      <nav class="hf-nav" aria-label="Primary navigation">
        <button class="nav-btn active" data-target="dashboard">Home</button>
        <button class="nav-btn" data-target="vitals">Vitals</button>
        <button class="nav-btn" data-target="organs">Organs</button>
        <button class="nav-btn" data-target="reports">Records</button>
        <button class="nav-btn" data-target="appointments">Appointments</button>
        <button class="nav-btn" data-target="copilot">Help</button>
      </nav>

      <div class="hf-actions">
        <button id="themeToggle" class="hf-icon" aria-label="Toggle theme">ğŸŒ“</button>
        <button class="hf-icon" aria-label="Notifications">ğŸ””</button>
        <button class="hf-icon" aria-label="Profile">ğŸ‘¤</button>
      </div>
    </div>
  </header>

  <main class="hf-wrapper" id="dashboard">

    <!-- HERO -->
    <section class="dashboard-hero">

      <div class="hero-left">
        <h1 class="hero-title">Hi, Dhivakaran ğŸ‘‹</h1>
        <p class="hero-sub">This screen keeps your health info simple and ready. No medical wordsâ€”just clear points.</p>

        <div class="vitals-grid" aria-label="Quick vitals">
          <div class="vital-card" data-v="hr">
            <span class="vital-label">Heart Rate</span>
            <strong id="v_hr" class="vital-value">76</strong>
            <small>bpm</small>
          </div>
          <div class="vital-card" data-v="bp">
            <span class="vital-label">Blood Pressure</span>
            <strong id="v_bp" class="vital-value">118/76</strong>
            <small>mmHg</small>
          </div>
          <div class="vital-card" data-v="spo2">
            <span class="vital-label">SpOâ‚‚</span>
            <strong id="v_spo2" class="vital-value">98%</strong>
            <small>oxygen</small>
          </div>
          <div class="vital-card" data-v="temp">
            <span class="vital-label">Body Temp</span>
            <strong id="v_temp" class="vital-value">36.8Â°C</strong>
            <small>core</small>
          </div>
        </div>

        <div class="ai-summary">
          <h3>AI Guardian in Plain Words</h3>
          <p id="ai_summary">All readings are normal. Stay hydrated and walk 20 mins.</p>
        </div>
      </div>

      <div class="hero-right">
        <div class="heart-3d-box">
          <model-viewer
            id="heart3d"
            src="https://modelviewer.dev/shared-assets/models/Heart.glb"
            auto-rotate
            camera-controls
            disable-zoom
            exposure="1.18"
            shadow-intensity="1.5"
            class="heart-model"
            aria-label="3D heart visual">
          </model-viewer>
          <div class="floating-hr-box">
            <strong id="hr_float">76</strong>
            <span>bpm</span>
          </div>
        </div>
        <canvas id="ecg_mini" class="ecg-mini" aria-label="Heart rhythm preview"></canvas>
      </div>
    </section>

    <!-- ORGAN HEALTH -->
    <section class="organ-twin" id="organs">
      <h2 class="section-title">Organ Health Twin</h2>
      <p class="section-sub">Simple view of how your main organs are doing right now.</p>

      <div class="organ-grid">
        <div class="organ-card" data-organ="brain">
          <div class="organ-icon">ğŸ§ </div>
          <h3>Brain</h3>
          <p class="organ-status">Calm</p>
          <small>No stress signals</small>
        </div>
        <div class="organ-card" data-organ="eyes">
          <div class="organ-icon">ğŸ‘</div>
          <h3>Eyes</h3>
          <p class="organ-status">Clear</p>
          <small>No strain today</small>
        </div>
        <div class="organ-card" data-organ="lungs">
          <div class="organ-icon">ğŸ«</div>
          <h3>Lungs</h3>
          <p class="organ-status">Strong</p>
          <small>Breathing steady</small>
        </div>
        <div class="organ-card" data-organ="heart">
          <div class="organ-icon">â¤ï¸</div>
          <h3>Heart</h3>
          <p class="organ-status">Good</p>
          <small>Rhythm steady</small>
        </div>
        <div class="organ-card" data-organ="liver">
          <div class="organ-icon">ğŸ§¬</div>
          <h3>Liver</h3>
          <p class="organ-status">Healthy</p>
          <small>Reports normal</small>
        </div>
        <div class="organ-card" data-organ="kidneys">
          <div class="organ-icon">ğŸ©º</div>
          <h3>Kidneys</h3>
          <p class="organ-status">Watch</p>
          <small>Drink more water</small>
        </div>
        <div class="organ-card" data-organ="gb">
          <div class="organ-icon">ğŸ«™</div>
          <h3>Gallbladder</h3>
          <p class="organ-status">Normal</p>
          <small>No pain alerts</small>
        </div>
        <div class="organ-card" data-organ="spleen">
          <div class="organ-icon">ğŸ§¬</div>
          <h3>Spleen</h3>
          <p class="organ-status">Normal</p>
          <small>Filters working</small>
        </div>
      </div>
    </section>

    <!-- LAB SUITE -->
    <section class="lab-suite" id="lab">
      <h2 class="section-title">Lab Reports Made Simple</h2>
      <p class="section-sub">Quick words on your blood tests. No medical jargon.</p>

      <div class="lab-suite-grid">
        <div class="lab-card">
          <h3>Complete Blood Count</h3>
          <div class="lab-row"><span>Red cells</span><strong id="lab_rbc">Good</strong></div>
          <div class="lab-row"><span>White cells</span><strong id="lab_wbc">Okay</strong></div>
          <div class="lab-row"><span>Platelets</span><strong id="lab_platelets">Fine</strong></div>
          <p class="lab-ai" id="lab_cbc_ai">Everything balanced. Keep eating fruits.</p>
        </div>

        <div class="lab-card">
          <h3>Liver Health</h3>
          <div class="lab-row"><span>SGOT</span><strong id="lab_sgot">Normal</strong></div>
          <div class="lab-row"><span>SGPT</span><strong id="lab_sgpt">Normal</strong></div>
          <div class="lab-row"><span>Bilirubin</span><strong id="lab_bilirubin">Normal</strong></div>
          <p class="lab-ai" id="lab_lft_ai">Liver looks fine. Avoid heavy oily food.</p>
        </div>

        <div class="lab-card">
          <h3>Kidney Health</h3>
          <div class="lab-row"><span>Creatinine</span><strong id="lab_creatinine">Slightly high</strong></div>
          <div class="lab-row"><span>Urea</span><strong id="lab_urea">Okay</strong></div>
          <div class="lab-row"><span>Sodium</span><strong id="lab_sodium">Normal</strong></div>
          <p class="lab-ai" id="lab_kft_ai">Drink 2-3 litres water daily. Check again in 1 week.</p>
        </div>
      </div>
    </section>

    <!-- INVESTIGATION TIMELINE -->
    <section class="investigation-timeline" id="investigations">
      <h2 class="section-title">Tests & Scans Status</h2>
      <p class="section-sub">Know what is done, in progress, and coming up.</p>

      <div class="investigation-flow">
        <div class="investigation-step done">
          <div class="step-bubble">1</div>
          <div>
            <strong>CBC + Liver + Kidney tests</strong>
            <p class="muted">Finished â€¢ Reports ready</p>
          </div>
        </div>
        <div class="investigation-step active">
          <div class="step-bubble">2</div>
          <div>
            <strong>Lipid profile</strong>
            <p class="muted">Sample collected â€¢ Being tested</p>
          </div>
        </div>
        <div class="investigation-step upcoming">
          <div class="step-bubble">3</div>
          <div>
            <strong>MRI brain</strong>
            <p class="muted">Scheduled â€¢ Feb 12</p>
          </div>
        </div>
        <div class="investigation-step upcoming">
          <div class="step-bubble">4</div>
          <div>
            <strong>Heart echo</strong>
            <p class="muted">Waiting for slot</p>
          </div>
        </div>
      </div>

      <p id="inv_ai_msg" class="inv-ai-msg">
        AI tip: Lipid report by 8 PM today. MRI on time. Echo slot will be confirmed soon.
      </p>
    </section>

    <!-- APPOINTMENTS -->
    <section class="appointments-section" id="appointments">
      <h2 class="section-title">Appointments</h2>
      <p class="section-sub">Upcoming doctor visits, labs, and scans.</p>

      <div class="appointment-grid">
        <div class="appointment-card">
          <div class="app-left">
            <div class="doc-pic">ğŸ‘¨â€âš•ï¸</div>
            <div>
              <h3>Dr. Arvind â€” Heart Doctor</h3>
              <p class="muted">Video follow-up</p>
              <div class="appt-time">Today â€¢ 6:00 PM <span class="dot-live"></span></div>
            </div>
          </div>
          <button class="btn-primary">Join video call</button>
        </div>

        <div class="appointment-card">
          <div class="app-left">
            <div class="doc-pic">ğŸ§ª</div>
            <div>
              <h3>PathLab Diagnostics</h3>
              <p class="muted">Lipid profile + liver test</p>
              <div class="appt-time">Tomorrow â€¢ 8:30 AM</div>
            </div>
          </div>
          <button class="btn-outline">See details</button>
        </div>

        <div class="appointment-card">
          <div class="app-left">
            <div class="doc-pic">ğŸ©»</div>
            <div>
              <h3>City Scans</h3>
              <p class="muted">MRI brain</p>
              <div class="appt-time">Feb 12 â€¢ 2:00 PM</div>
            </div>
          </div>
          <button class="btn-outline">View center</button>
        </div>
      </div>
    </section>

    <!-- MEDICINES -->
    <section class="medicine-section" id="medicines">
      <h2 class="section-title">Medicine Reminders & Orders</h2>
      <p class="section-sub">Easy tracker with simple advice.</p>

      <div class="medicine-grid">
        <div class="medicine-card" data-status="shipped">
          <div class="med-left">
            <div class="pill-icon">ğŸ’Š</div>
            <div>
              <h3>Telmisartan 40mg</h3>
              <p class="muted">For blood pressure</p>
              <p class="ai-msg good">AI: Safe with your current meds.</p>
            </div>
          </div>
          <div class="med-right">
            <span class="pill shipped">On the way</span>
            <small>Expected today</small>
          </div>
        </div>

        <div class="medicine-card" data-status="processing">
          <div class="med-left">
            <div class="pill-icon">ğŸ’‰</div>
            <div>
              <h3>Insulin cartridge</h3>
              <p class="muted">For sugar control</p>
              <p class="ai-msg warn">AI: Check dose with tonight's dinner.</p>
            </div>
          </div>
          <div class="med-right">
            <span class="pill processing">Processing</span>
            <small>Dispatching soon</small>
          </div>
        </div>

        <div class="medicine-card" data-status="delivered">
          <div class="med-left">
            <div class="pill-icon">ğŸ§´</div>
            <div>
              <h3>Vitamin D3 60K IU</h3>
              <p class="muted">Weekly supplement</p>
              <p class="ai-msg good">AI: Take after food.</p>
            </div>
          </div>
          <div class="med-right">
            <span class="pill delivered">Delivered</span>
            <small>Yesterday</small>
          </div>
        </div>
      </div>
    </section>

    <!-- OFFERS -->
    <section class="offers-section" id="offers">
      <h2 class="section-title">Offers For You</h2>
      <p class="section-sub">Deals picked for your health plan.</p>

      <div class="offers-grid">
        <div class="offer-card">
          <span class="offer-tag red">40% OFF</span>
          <h3>Full body checkup</h3>
          <p class="muted">PathLab Diagnostics â€¢ Till Feb 14</p>
          <div class="offer-ai good">AI: Good time to do this.</div>
          <button class="btn-primary">Book now</button>
        </div>
        <div class="offer-card">
          <span class="offer-tag blue">25% OFF</span>
          <h3>MRI / CT scan</h3>
          <p class="muted">City Scans, Hyderabad</p>
          <div class="offer-ai neutral">AI: Useful for your follow-up.</div>
          <button class="btn-primary">View centers</button>
        </div>
        <div class="offer-card">
          <span class="offer-tag green">UPGRADE</span>
          <h3>Cashless room upgrade</h3>
          <p class="muted">190+ hospitals</p>
          <div class="offer-ai good">AI: Covered under your plan.</div>
          <button class="btn-primary">Check eligibility</button>
        </div>
      </div>
    </section>

    <!-- EMERGENCY -->
    <section class="emergency-section" id="emergency">
      <h2 class="section-title">Emergency Assist</h2>
      <p class="section-sub">Call ambulance in one tap. Family gets alerts too.</p>

      <div class="emergency-box">
        <div class="emg-left">
          <h3>ğŸš‘ Need help now?</h3>
          <p class="muted">We will share your location and basic health info to get help fast.</p>
          <button id="triggerEmergency" class="btn-emergency">Trigger emergency</button>
          <p class="emg-status" id="emg_status_msg">Ready to connect to nearby ambulances.</p>
        </div>
        <div class="emg-orb" aria-hidden="true">
          <div class="orb-core"></div>
          <div class="orb-ring"></div>
          <div class="orb-wave"></div>
        </div>
      </div>
    </section>

    <!-- PROFILE -->
    <section class="profile-section" id="profile">
      <h2 class="section-title">My Profile</h2>
      <p class="section-sub">All your key details and family contacts.</p>

      <div class="profile-card">
        <div class="profile-avatar-wrap">
          <img src="https://i.pravatar.cc/150" class="profile-avatar" alt="Profile avatar">
        </div>

        <div class="profile-info-main">
          <h3>Dhivakaran Rabindran</h3>
          <p class="muted">Age 29 â€¢ Male â€¢ India</p>

          <div class="ai-persona">
            <h4>AI note about you</h4>
            <p id="aiPersonaSummary">You are active and keep medicines on time. Keep morning walks.</p>
          </div>

          <div class="profile-grid">
            <div class="p-tile"><h5>Phone</h5><p>+91 98765 43210</p></div>
            <div class="p-tile"><h5>Email</h5><p>user@healthflo.org</p></div>
            <div class="p-tile"><h5>Blood Group</h5><p>O+</p></div>
            <div class="p-tile"><h5>Emergency Contact</h5><p>+91 98765 00021</p></div>
          </div>

          <div class="profile-columns">
            <div class="p-info-block">
              <h4>Medical Info</h4>
              <p><strong>Chronic:</strong> None</p>
              <p><strong>Allergies:</strong> None</p>
              <p><strong>Last check-up:</strong> Feb 2025</p>
            </div>
            <div class="p-info-block">
              <h4>Insurance</h4>
              <p><strong>Policy:</strong> Star Health</p>
              <p><strong>Coverage:</strong> â‚¹10,00,000</p>
              <p><strong>Status:</strong> Active cashless</p>
            </div>
            <div class="p-info-block">
              <h4>Money & Loans</h4>
              <p><strong>CIBIL:</strong> 742 (Good)</p>
              <p><strong>Loan:</strong> Pre-approved</p>
              <p><strong>EMIs:</strong> None</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- REPORT VAULT -->
    <section class="report-vault" id="reports">
      <h2 class="section-title">Report Vault</h2>
      <p class="section-sub">All your health documents in one safe place.</p>

      <div class="report-grid">
        <div class="report-card" data-report="cbc_report">
          <div class="report-icon">ğŸ“„</div>
          <h3>CBC report</h3>
          <p class="muted">Uploaded: Feb 4</p>
          <button class="btn-outline report-open-btn" data-target="cbc_report_modal">View</button>
        </div>
        <div class="report-card" data-report="lft_report">
          <div class="report-icon">ğŸ“„</div>
          <h3>Liver report</h3>
          <p class="muted">Uploaded: Feb 4</p>
          <button class="btn-outline report-open-btn" data-target="lft_report_modal">View</button>
        </div>
        <div class="report-card" data-report="kft_report">
          <div class="report-icon">ğŸ“„</div>
          <h3>Kidney report</h3>
          <p class="muted">Uploaded: Feb 4</p>
          <button class="btn-outline report-open-btn" data-target="kft_report_modal">View</button>
        </div>
        <div class="report-card" data-report="lipid_profile">
          <div class="report-icon">ğŸ“„</div>
          <h3>Lipid profile</h3>
          <p class="muted">Uploaded: Feb 6</p>
          <button class="btn-outline report-open-btn" data-target="lipid_report_modal">View</button>
        </div>
      </div>
    </section>

    <!-- REPORT MODAL -->
    <div id="reportModal" class="modal-overlay hidden" role="dialog" aria-modal="true">
      <div class="modal-box">
        <button class="modal-close" aria-label="Close">Ã—</button>
        <h2 id="modalTitle">Report</h2>
        <p id="modalDate">Date: --</p>
        <div class="modal-content">
          <img id="modalImage" src="" alt="Report preview">
        </div>
        <button class="btn-primary" id="downloadReport">Download</button>
      </div>
    </div>

    <!-- ORGAN MODAL -->
    <div id="organModal" class="modal-overlay hidden" role="dialog" aria-modal="true">
      <div class="modal-box organ-modal-box">
        <button class="modal-close" aria-label="Close">Ã—</button>
        <h2 id="organTitle">Organ details</h2>
        <div class="organ-modal-layout">
          <div class="organ-3d-wrap">
            <model-viewer
              id="organModel3D"
              src="https://modelviewer.dev/shared-assets/models/Heart.glb"
              auto-rotate
              camera-controls
              disable-zoom
              aria-label="Organ 3D view">
            </model-viewer>
          </div>
          <div class="organ-stats">
            <div class="stat-row"><span>Status</span><strong id="organStatus">--</strong></div>
            <div class="stat-row"><span>AI observation</span><strong id="organAI">--</strong></div>
            <div class="stat-row"><span>Risk score</span><strong id="organRisk">--</strong></div>
            <h3 class="chart-title">Vital trend</h3>
            <canvas id="organTrendChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- AI COPILOT -->
    <div class="copilot-widget" id="copilot">
      <div class="copilot-header">
        <h3>AI Copilot</h3>
        <button class="copilot-close" aria-label="Close">Ã—</button>
      </div>
      <div class="copilot-body" id="copilotChat">
        <div class="msg-ai">Hello! Iâ€™m here to help in simple words. Ask anything.</div>
      </div>
      <div class="copilot-input-wrap">
        <input type="text" id="copilotInput" placeholder="Ask anythingâ€¦" aria-label="Type your question">
        <button id="copilotSend">â¤</button>
      </div>
    </div>
    <button class="copilot-launcher" id="openCopilot">ğŸ¤–</button>

    <!-- BODY MAP -->
    <section class="bodymap-section" id="bodymap">
      <h2 class="section-title">Human Body â€” 3D View</h2>
      <p class="section-sub">Tap any part to learn what it does.</p>
      <div class="bodymap-container">
        <model-viewer
          id="bodyModel"
          src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
          camera-controls
          auto-rotate
          shadow-intensity="1.4"
          exposure="1.2"
          aria-label="Full body 3D view">
        </model-viewer>
      </div>
    </section>

    <!-- DOCK -->
    <nav class="neo-dock" aria-label="Quick navigation">
      <button class="dock-btn active" data-target="dashboard">ğŸ </button>
      <button class="dock-btn" data-target="vitals">ğŸ’“</button>
      <button class="dock-btn" data-target="organs">ğŸ§¬</button>
      <button class="dock-btn" data-target="reports">ğŸ“„</button>
      <button class="dock-btn" data-target="appointments">ğŸ“…</button>
      <button class="dock-btn" id="dockCopilot">ğŸ¤–</button>
    </nav>

    <!-- FOOTER -->
    <footer class="hf-footer">
      <p>Â© 2025 HealthFlo â€” Neo Guardian OS</p>
      <p class="muted small">Made for patients and families in everyday language.</p>
    </footer>

  </main>

  <script src="patient-os.js"></script>
</body>
</html>
